-- 렌탈샵 테이블
CREATE TABLE RENTALSHOP
(
    RENTALSHOP_ID NUMBER PRIMARY KEY,
    UUID          NUMBER               NOT NULL,
    NAME          VARCHAR2(200)        NOT NULL,
    LOCATION      VARCHAR2(200)        NOT NULL,
    REMAIN_IMG    VARCHAR2(255),
    RENTAL_PHONE VARCHAR2(255) NOT NULL,
    RESUB_IMG1    VARCHAR2(255),
    RESUB_IMG2    VARCHAR2(255),
    RESUB_IMG3    VARCHAR2(255),
    DESCRIPTION   VARCHAR2(1000),
    CREATED_AT    DATE DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_RENTALSHOP_USER FOREIGN KEY (UUID) REFERENCES USERS (UUID)
);

-- INSERT
insert into rentalshop values (1,1,'렌탈샵1','강원도','img1','010-1234-1234','img2','img3','img4','렌탈샵소개1',sysdate);
insert into rentalshop values (2,2,'렌탈샵2','경기도','img1','010-1212-1212','img2','img3','img4','렌탈샵2소개',sysdate);
insert into rentalshop values (3,3,'렌탈샵3','경기도','img1','010-1212-1212','img2','img3','img4','렌탈샵3소개',sysdate);
insert into rentalshop values (4,4,'렌탈샵4','강원도','img1','010-2222-3333','img2','img3','img4','렌탈샵4소개',sysdate);
insert into rentalshop values (5,5,'렌탈샵5','경기도','img1','010-4321-0978','img2','img3','img4','렌탈샵5소개',sysdate);

-- 렌탈샵 예약 테이블
CREATE TABLE RENTAL_RESERVATION
(
    RENT_RESERV_ID NUMBER PRIMARY KEY,
    RENTALSHOP_ID  NUMBER                       NOT NULL,
    UUID           NUMBER                       NOT NULL,
    RENTAL_START   TIMESTAMP                    NOT NULL,
    RENTAL_END     TIMESTAMP                    NOT NULL,
    TOTAL_PRICE    NUMBER                       NOT NULL,
    STATUS         VARCHAR2(20) DEFAULT '예약완료' CHECK (STATUS IN ('예약완료', '대여중', '반납완료', '취소')),
    CREATED_AT     DATE         DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_RENTAL_RESERV_SHOP FOREIGN KEY (RENTALSHOP_ID) REFERENCES RENTALSHOP (RENTALSHOP_ID),
    CONSTRAINT FK_RENTAL_RESERV_USER FOREIGN KEY (UUID) REFERENCES USERS (UUID)
);

-- INSERT
INSERT INTO RENTAL_RESERVATION VALUES (1, 1, 1, '25-04-01', '25-04-03', 120000, '예약완료', SYSDATE);
INSERT INTO RENTAL_RESERVATION VALUES (2, 2, 2, '25-04-07', '25-04-08', 150000, '예약완료', SYSDATE);
INSERT INTO RENTAL_RESERVATION VALUES (3, 3, 3, '25-04-11', '25-04-12', 220000, '예약완료', SYSDATE);
INSERT INTO RENTAL_RESERVATION VALUES (4, 4, 4, '25-04-21', '25-04-23', 320000, '예약완료', SYSDATE);
INSERT INTO RENTAL_RESERVATION VALUES (5, 5, 5, '25-04-06', '25-04-07', 250000, '예약완료', SYSDATE);

-- 렌탈샵 장비 카테고리
CREATE TABLE ITEM_CATEGORY
(
    CATEGORY_ID    NUMBER PRIMARY KEY,
    ITEM_TYPE      VARCHAR2(100) NOT NULL CHECK (ITEM_TYPE IN ('리프트권', '패키지', '스키', '보드', '보호구', '상의', '하의', '신발')),
    PRICE_PER_HOUR NUMBER
);

-- INSERT
INSERT INTO ITEM_CATEGORY VALUES (1, '리프트권', 1000);
INSERT INTO ITEM_CATEGORY VALUES (2, '패키지', 10000);
INSERT INTO ITEM_CATEGORY VALUES (3, '스키', 5000);
INSERT INTO ITEM_CATEGORY VALUES (4, '보드', 5000);
INSERT INTO ITEM_CATEGORY VALUES (5, '보호구', 2000);


-- 렌탈샵 장비 유형 테이블
CREATE TABLE RENT_ITEM
(
    ITEM_ID        NUMBER PRIMARY KEY,
    CATEGORY_ID    NUMBER               NOT NULL,
    RENTALSHOP_ID  NUMBER               NOT NULL,
    ITEM_NAME    VARCHAR2(50)	    NOT NULL,
    ITEM_DETAIL    VARCHAR2(100),
    TOTAL_QUANTITY NUMBER               NOT NULL,
    ITEM_IMG    VARCHAR2(100) 	  NOT NULL,
    CREATED_AT     DATE DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_RENT_ITEM_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES ITEM_CATEGORY (CATEGORY_ID),
    CONSTRAINT FK_RENT_ITEM_SHOP FOREIGN KEY (RENTALSHOP_ID) REFERENCES RENTALSHOP (RENTALSHOP_ID)
);

-- INSERT
INSERT INTO RENT_ITEM VALUES (1, 1, 1, '고급 스키 세트', '초보자용 고급 스키 장비', 10, 'img1', SYSDATE);
INSERT INTO RENT_ITEM VALUES (2, 2, 2, '프리미엄 스노보드', '전문가용 보드 장비', 7, 'img2', SYSDATE);
INSERT INTO RENT_ITEM VALUES (3, 3, 3, '헬멧', '안전한 라이딩을 위한 보호 장비', 15, 'img3', SYSDATE);
INSERT INTO RENT_ITEM VALUES (4, 4, 4, '방한 자켓', '추운 날씨에도 따뜻한 방한복', 20, 'img4', SYSDATE);
INSERT INTO RENT_ITEM VALUES (5, 5, 5, '스키 팬츠', '방수 기능이 뛰어난 하의', 18, 'img5', SYSDATE);

-- 렌탈 예약 상세 테이블
CREATE TABLE RENT_RESERVATION_ITEM
(
    RENT_ITEM_ID   NUMBER PRIMARY KEY,
    RENT_RESERV_ID NUMBER        NOT NULL,
    ITEM_ID        NUMBER        NOT NULL,
    QUANTITY       NUMBER        NOT NULL,
    SUBTOTAL_PRICE NUMBER(10, 2) NOT NULL,
    CONSTRAINT FK_RENTAL_RESERV FOREIGN KEY (RENT_RESERV_ID) REFERENCES RENTAL_RESERVATION (RENT_RESERV_ID),
    CONSTRAINT FK_RENTAL_ITEM FOREIGN KEY (ITEM_ID) REFERENCES RENT_ITEM (ITEM_ID)
);

-- INSERT
INSERT INTO RENT_RESERVATION_ITEM VALUES (1, 1, 1, 10, 10000);
INSERT INTO RENT_RESERVATION_ITEM VALUES (2, 2, 2, 20, 20000);
INSERT INTO RENT_RESERVATION_ITEM VALUES (3, 3, 3, 30, 30000);
INSERT INTO RENT_RESERVATION_ITEM VALUES (4, 4, 4, 40, 40000);
INSERT INTO RENT_RESERVATION_ITEM VALUES (5, 5, 5, 50, 50000);


-- 렌탈샵 결제 테이블
CREATE TABLE RENT_PAYMENTS
(
    PAYMENT_ID     NUMBER PRIMARY KEY,
    RENT_RESERV_ID NUMBER               NOT NULL,
    UUID           NUMBER               NOT NULL,
    TOTAL_PRICE    NUMBER(10, 2)        NOT NULL,
    PAYMENT_METHOD VARCHAR2(50)         NOT NULL CHECK (PAYMENT_METHOD IN ('CARD', 'KAKAOPAY', 'NAVERPAY')),
    STATUS         VARCHAR2(20)         NOT NULL CHECK (STATUS IN ('완료', '환불', '결제중')),
    IMP_UID        VARCHAR2(50)         NOT NULL,
    CARD_NUM       VARCHAR2(50),
    CARD_NAME      VARCHAR2(50),
    CREATED_AT     DATE DEFAULT SYSDATE NOT NULL,
    CONSTRAINT FK_RENT_PAYMENTS_RESERV FOREIGN KEY (RENT_RESERV_ID) REFERENCES RENTAL_RESERVATION (RENT_RESERV_ID),
    CONSTRAINT FK_RENT_PAYMENTS_USER FOREIGN KEY (UUID) REFERENCES USERS (UUID)
);

-- INSERT
INSERT INTO RENT_PAYMENTS VALUES (1, 1, 1, 50000, 'CARD', '완료', 'IMP_1234567890', '1234-5678-9012-3456', 'KB국민카드', SYSDATE);
INSERT INTO RENT_PAYMENTS VALUES (2, 2, 2, 75000, 'KAKAOPAY', '완료', 'IMP_0987654321', '1234-5678-9012-3456', '우리카드', SYSDATE);
INSERT INTO RENT_PAYMENTS VALUES (3, 3, 3, 120000, 'NAVERPAY', '결제중', 'IMP_5678901234', '1234-5678-9012-3456', '삼성카드', SYSDATE);
INSERT INTO RENT_PAYMENTS VALUES (4, 4, 4, 65000, 'CARD', '환불', 'IMP_3456789012', '9876-5432-1098-7654', '신한카드', SYSDATE);
INSERT INTO RENT_PAYMENTS VALUES (5, 5, 5, 89000, 'KAKAOPAY', '완료', 'IMP_6789012345', '1234-5678-9012-3456', '현대카드', SYSDATE);


-- 시퀀스
CREATE SEQUENCE RENTALSHOP_SEQ;
CREATE SEQUENCE RENTAL_RESERVATION_SEQ;
CREATE SEQUENCE RENT_RESERVATION_ITEM_SEQ;
CREATE SEQUENCE ITEM_CATEGORY_SEQ;
CREATE SEQUENCE RENT_ITEM_SEQ;
CREATE SEQUENCE RENT_PAYMENTS_SEQ;





